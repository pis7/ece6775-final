// ==============================================================
// RTL generated by Vivado(TM) HLS - High-Level Synthesis from C, C++ and OpenCL
// Version: 2019.2
// Copyright (C) 1986-2019 Xilinx, Inc. All Rights Reserved.
// 
// ===========================================================

#include "apply_rotary_pos_emb.h"
#include "AESL_pkg.h"

using namespace std;

namespace ap_rtl {

const sc_logic apply_rotary_pos_emb::ap_const_logic_1 = sc_dt::Log_1;
const sc_logic apply_rotary_pos_emb::ap_const_logic_0 = sc_dt::Log_0;
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state1 = "1";
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state2 = "10";
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state3 = "100";
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state4 = "1000";
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state5 = "10000";
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state6 = "100000";
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state7 = "1000000";
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state8 = "10000000";
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state9 = "100000000";
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state10 = "1000000000";
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state11 = "10000000000";
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state12 = "100000000000";
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state13 = "1000000000000";
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state14 = "10000000000000";
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state15 = "100000000000000";
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state16 = "1000000000000000";
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state17 = "10000000000000000";
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state18 = "100000000000000000";
const sc_lv<19> apply_rotary_pos_emb::ap_ST_fsm_state19 = "1000000000000000000";
const sc_lv<32> apply_rotary_pos_emb::ap_const_lv32_0 = "00000000000000000000000000000000";
const sc_lv<32> apply_rotary_pos_emb::ap_const_lv32_1 = "1";
const sc_lv<1> apply_rotary_pos_emb::ap_const_lv1_0 = "0";
const sc_lv<32> apply_rotary_pos_emb::ap_const_lv32_2 = "10";
const sc_lv<32> apply_rotary_pos_emb::ap_const_lv32_3 = "11";
const sc_lv<32> apply_rotary_pos_emb::ap_const_lv32_4 = "100";
const sc_lv<32> apply_rotary_pos_emb::ap_const_lv32_6 = "110";
const sc_lv<32> apply_rotary_pos_emb::ap_const_lv32_7 = "111";
const sc_lv<32> apply_rotary_pos_emb::ap_const_lv32_8 = "1000";
const sc_lv<32> apply_rotary_pos_emb::ap_const_lv32_C = "1100";
const sc_lv<32> apply_rotary_pos_emb::ap_const_lv32_11 = "10001";
const sc_lv<5> apply_rotary_pos_emb::ap_const_lv5_0 = "00000";
const sc_lv<1> apply_rotary_pos_emb::ap_const_lv1_1 = "1";
const sc_lv<7> apply_rotary_pos_emb::ap_const_lv7_0 = "0000000";
const sc_lv<32> apply_rotary_pos_emb::ap_const_lv32_5 = "101";
const bool apply_rotary_pos_emb::ap_const_boolean_0 = false;
const sc_lv<32> apply_rotary_pos_emb::ap_const_lv32_12 = "10010";
const sc_lv<32> apply_rotary_pos_emb::ap_const_lv32_D = "1101";
const sc_lv<32> apply_rotary_pos_emb::ap_const_lv32_9 = "1001";
const sc_lv<5> apply_rotary_pos_emb::ap_const_lv5_10 = "10000";
const sc_lv<5> apply_rotary_pos_emb::ap_const_lv5_1 = "1";
const sc_lv<7> apply_rotary_pos_emb::ap_const_lv7_60 = "1100000";
const sc_lv<7> apply_rotary_pos_emb::ap_const_lv7_1 = "1";
const sc_lv<10> apply_rotary_pos_emb::ap_const_lv10_1E0 = "111100000";
const bool apply_rotary_pos_emb::ap_const_boolean_1 = true;

apply_rotary_pos_emb::apply_rotary_pos_emb(sc_module_name name) : sc_module(name), mVcdFile(0) {
    rotated_q_0_U = new apply_rotary_pos_vdy("rotated_q_0_U");
    rotated_q_0_U->clk(ap_clk);
    rotated_q_0_U->reset(ap_rst);
    rotated_q_0_U->address0(rotated_q_0_address0);
    rotated_q_0_U->ce0(rotated_q_0_ce0);
    rotated_q_0_U->we0(rotated_q_0_we0);
    rotated_q_0_U->d0(rotated_q_0_d0);
    rotated_q_0_U->q0(rotated_q_0_q0);
    rotated_q_0_U->address1(grp_rotate_half_fu_248_v148_0_address1);
    rotated_q_0_U->ce1(rotated_q_0_ce1);
    rotated_q_0_U->we1(rotated_q_0_we1);
    rotated_q_0_U->d1(grp_rotate_half_fu_248_v148_0_d1);
    rotated_k_0_U = new apply_rotary_pos_vdy("rotated_k_0_U");
    rotated_k_0_U->clk(ap_clk);
    rotated_k_0_U->reset(ap_rst);
    rotated_k_0_U->address0(rotated_k_0_address0);
    rotated_k_0_U->ce0(rotated_k_0_ce0);
    rotated_k_0_U->we0(rotated_k_0_we0);
    rotated_k_0_U->d0(rotated_k_0_d0);
    rotated_k_0_U->q0(rotated_k_0_q0);
    rotated_k_0_U->address1(grp_rotate_half_fu_255_v148_0_address1);
    rotated_k_0_U->ce1(rotated_k_0_ce1);
    rotated_k_0_U->we1(rotated_k_0_we1);
    rotated_k_0_U->d1(grp_rotate_half_fu_255_v148_0_d1);
    grp_rotate_half_fu_248 = new rotate_half("grp_rotate_half_fu_248");
    grp_rotate_half_fu_248->ap_clk(ap_clk);
    grp_rotate_half_fu_248->ap_rst(ap_rst);
    grp_rotate_half_fu_248->ap_start(grp_rotate_half_fu_248_ap_start);
    grp_rotate_half_fu_248->ap_done(grp_rotate_half_fu_248_ap_done);
    grp_rotate_half_fu_248->ap_idle(grp_rotate_half_fu_248_ap_idle);
    grp_rotate_half_fu_248->ap_ready(grp_rotate_half_fu_248_ap_ready);
    grp_rotate_half_fu_248->v147_0_address0(grp_rotate_half_fu_248_v147_0_address0);
    grp_rotate_half_fu_248->v147_0_ce0(grp_rotate_half_fu_248_v147_0_ce0);
    grp_rotate_half_fu_248->v147_0_q0(q_proj_0_q0);
    grp_rotate_half_fu_248->v147_0_address1(grp_rotate_half_fu_248_v147_0_address1);
    grp_rotate_half_fu_248->v147_0_ce1(grp_rotate_half_fu_248_v147_0_ce1);
    grp_rotate_half_fu_248->v147_0_q1(q_proj_0_q1);
    grp_rotate_half_fu_248->v148_0_address0(grp_rotate_half_fu_248_v148_0_address0);
    grp_rotate_half_fu_248->v148_0_ce0(grp_rotate_half_fu_248_v148_0_ce0);
    grp_rotate_half_fu_248->v148_0_we0(grp_rotate_half_fu_248_v148_0_we0);
    grp_rotate_half_fu_248->v148_0_d0(grp_rotate_half_fu_248_v148_0_d0);
    grp_rotate_half_fu_248->v148_0_address1(grp_rotate_half_fu_248_v148_0_address1);
    grp_rotate_half_fu_248->v148_0_ce1(grp_rotate_half_fu_248_v148_0_ce1);
    grp_rotate_half_fu_248->v148_0_we1(grp_rotate_half_fu_248_v148_0_we1);
    grp_rotate_half_fu_248->v148_0_d1(grp_rotate_half_fu_248_v148_0_d1);
    grp_rotate_half_fu_255 = new rotate_half("grp_rotate_half_fu_255");
    grp_rotate_half_fu_255->ap_clk(ap_clk);
    grp_rotate_half_fu_255->ap_rst(ap_rst);
    grp_rotate_half_fu_255->ap_start(grp_rotate_half_fu_255_ap_start);
    grp_rotate_half_fu_255->ap_done(grp_rotate_half_fu_255_ap_done);
    grp_rotate_half_fu_255->ap_idle(grp_rotate_half_fu_255_ap_idle);
    grp_rotate_half_fu_255->ap_ready(grp_rotate_half_fu_255_ap_ready);
    grp_rotate_half_fu_255->v147_0_address0(grp_rotate_half_fu_255_v147_0_address0);
    grp_rotate_half_fu_255->v147_0_ce0(grp_rotate_half_fu_255_v147_0_ce0);
    grp_rotate_half_fu_255->v147_0_q0(k_proj_0_q0);
    grp_rotate_half_fu_255->v147_0_address1(grp_rotate_half_fu_255_v147_0_address1);
    grp_rotate_half_fu_255->v147_0_ce1(grp_rotate_half_fu_255_v147_0_ce1);
    grp_rotate_half_fu_255->v147_0_q1(k_proj_0_q1);
    grp_rotate_half_fu_255->v148_0_address0(grp_rotate_half_fu_255_v148_0_address0);
    grp_rotate_half_fu_255->v148_0_ce0(grp_rotate_half_fu_255_v148_0_ce0);
    grp_rotate_half_fu_255->v148_0_we0(grp_rotate_half_fu_255_v148_0_we0);
    grp_rotate_half_fu_255->v148_0_d0(grp_rotate_half_fu_255_v148_0_d0);
    grp_rotate_half_fu_255->v148_0_address1(grp_rotate_half_fu_255_v148_0_address1);
    grp_rotate_half_fu_255->v148_0_ce1(grp_rotate_half_fu_255_v148_0_ce1);
    grp_rotate_half_fu_255->v148_0_we1(grp_rotate_half_fu_255_v148_0_we1);
    grp_rotate_half_fu_255->v148_0_d1(grp_rotate_half_fu_255_v148_0_d1);
    attention_fadd_32pcA_U55 = new attention_fadd_32pcA<1,5,32,32,32>("attention_fadd_32pcA_U55");
    attention_fadd_32pcA_U55->clk(ap_clk);
    attention_fadd_32pcA_U55->reset(ap_rst);
    attention_fadd_32pcA_U55->din0(v_reg_628);
    attention_fadd_32pcA_U55->din1(v8_reg_633);
    attention_fadd_32pcA_U55->ce(ap_var_for_const0);
    attention_fadd_32pcA_U55->dout(grp_fu_262_p2);
    attention_fadd_32pcA_U56 = new attention_fadd_32pcA<1,5,32,32,32>("attention_fadd_32pcA_U56");
    attention_fadd_32pcA_U56->clk(ap_clk);
    attention_fadd_32pcA_U56->reset(ap_rst);
    attention_fadd_32pcA_U56->din0(v1_reg_638);
    attention_fadd_32pcA_U56->din1(v2_reg_643);
    attention_fadd_32pcA_U56->ce(ap_var_for_const0);
    attention_fadd_32pcA_U56->dout(grp_fu_266_p2);
    attention_fmul_32qcK_U57 = new attention_fmul_32qcK<1,4,32,32,32>("attention_fmul_32qcK_U57");
    attention_fmul_32qcK_U57->clk(ap_clk);
    attention_fmul_32qcK_U57->reset(ap_rst);
    attention_fmul_32qcK_U57->din0(q_proj_0_load_reg_596);
    attention_fmul_32qcK_U57->din1(v157_load_reg_601);
    attention_fmul_32qcK_U57->ce(ap_var_for_const0);
    attention_fmul_32qcK_U57->dout(grp_fu_270_p2);
    attention_fmul_32qcK_U58 = new attention_fmul_32qcK<1,4,32,32,32>("attention_fmul_32qcK_U58");
    attention_fmul_32qcK_U58->clk(ap_clk);
    attention_fmul_32qcK_U58->reset(ap_rst);
    attention_fmul_32qcK_U58->din0(rotated_q_0_load_reg_607);
    attention_fmul_32qcK_U58->din1(v158_load_reg_612);
    attention_fmul_32qcK_U58->ce(ap_var_for_const0);
    attention_fmul_32qcK_U58->dout(grp_fu_274_p2);
    attention_fmul_32qcK_U59 = new attention_fmul_32qcK<1,4,32,32,32>("attention_fmul_32qcK_U59");
    attention_fmul_32qcK_U59->clk(ap_clk);
    attention_fmul_32qcK_U59->reset(ap_rst);
    attention_fmul_32qcK_U59->din0(k_proj_0_load_reg_618);
    attention_fmul_32qcK_U59->din1(v157_load_reg_601);
    attention_fmul_32qcK_U59->ce(ap_var_for_const0);
    attention_fmul_32qcK_U59->dout(grp_fu_278_p2);
    attention_fmul_32qcK_U60 = new attention_fmul_32qcK<1,4,32,32,32>("attention_fmul_32qcK_U60");
    attention_fmul_32qcK_U60->clk(ap_clk);
    attention_fmul_32qcK_U60->reset(ap_rst);
    attention_fmul_32qcK_U60->din0(rotated_k_0_load_reg_623);
    attention_fmul_32qcK_U60->din1(v158_load_reg_612);
    attention_fmul_32qcK_U60->ce(ap_var_for_const0);
    attention_fmul_32qcK_U60->dout(grp_fu_282_p2);

    SC_METHOD(thread_ap_clk_no_reset_);
    dont_initialize();
    sensitive << ( ap_clk.pos() );

    SC_METHOD(thread_add_ln265_fu_330_p2);
    sensitive << ( v165_0_0_reg_193 );

    SC_METHOD(thread_add_ln266_fu_340_p2);
    sensitive << ( sub_ln266_reg_505 );
    sensitive << ( zext_ln266_1_fu_336_p1 );

    SC_METHOD(thread_add_ln273_fu_394_p2);
    sensitive << ( v169_0_0_reg_215 );

    SC_METHOD(thread_add_ln274_fu_404_p2);
    sensitive << ( sub_ln274_reg_526 );
    sensitive << ( zext_ln274_1_fu_400_p1 );

    SC_METHOD(thread_add_ln282_fu_458_p2);
    sensitive << ( d2_0_0_reg_237 );

    SC_METHOD(thread_add_ln284_fu_485_p2);
    sensitive << ( zext_ln291_1_fu_464_p1 );

    SC_METHOD(thread_add_ln291_fu_472_p2);
    sensitive << ( sub_ln291_reg_547 );
    sensitive << ( zext_ln291_2_fu_468_p1 );

    SC_METHOD(thread_ap_CS_fsm_state1);
    sensitive << ( ap_CS_fsm );

    SC_METHOD(thread_ap_CS_fsm_state10);
    sensitive << ( ap_CS_fsm );

    SC_METHOD(thread_ap_CS_fsm_state13);
    sensitive << ( ap_CS_fsm );

    SC_METHOD(thread_ap_CS_fsm_state14);
    sensitive << ( ap_CS_fsm );

    SC_METHOD(thread_ap_CS_fsm_state18);
    sensitive << ( ap_CS_fsm );

    SC_METHOD(thread_ap_CS_fsm_state19);
    sensitive << ( ap_CS_fsm );

    SC_METHOD(thread_ap_CS_fsm_state2);
    sensitive << ( ap_CS_fsm );

    SC_METHOD(thread_ap_CS_fsm_state3);
    sensitive << ( ap_CS_fsm );

    SC_METHOD(thread_ap_CS_fsm_state4);
    sensitive << ( ap_CS_fsm );

    SC_METHOD(thread_ap_CS_fsm_state5);
    sensitive << ( ap_CS_fsm );

    SC_METHOD(thread_ap_CS_fsm_state6);
    sensitive << ( ap_CS_fsm );

    SC_METHOD(thread_ap_CS_fsm_state7);
    sensitive << ( ap_CS_fsm );

    SC_METHOD(thread_ap_CS_fsm_state8);
    sensitive << ( ap_CS_fsm );

    SC_METHOD(thread_ap_CS_fsm_state9);
    sensitive << ( ap_CS_fsm );

    SC_METHOD(thread_ap_block_state6_on_subcall_done);
    sensitive << ( grp_rotate_half_fu_248_ap_done );
    sensitive << ( grp_rotate_half_fu_255_ap_done );

    SC_METHOD(thread_ap_done);
    sensitive << ( ap_start );
    sensitive << ( ap_CS_fsm_state1 );
    sensitive << ( ap_CS_fsm_state7 );
    sensitive << ( icmp_ln280_fu_414_p2 );

    SC_METHOD(thread_ap_idle);
    sensitive << ( ap_start );
    sensitive << ( ap_CS_fsm_state1 );

    SC_METHOD(thread_ap_ready);
    sensitive << ( ap_CS_fsm_state7 );
    sensitive << ( icmp_ln280_fu_414_p2 );

    SC_METHOD(thread_grp_rotate_half_fu_248_ap_start);
    sensitive << ( grp_rotate_half_fu_248_ap_start_reg );

    SC_METHOD(thread_grp_rotate_half_fu_255_ap_start);
    sensitive << ( grp_rotate_half_fu_255_ap_start_reg );

    SC_METHOD(thread_h2_fu_420_p2);
    sensitive << ( h2_0_reg_226 );

    SC_METHOD(thread_icmp_ln263_fu_286_p2);
    sensitive << ( ap_CS_fsm_state2 );
    sensitive << ( v163_0_reg_182 );

    SC_METHOD(thread_icmp_ln265_fu_324_p2);
    sensitive << ( ap_CS_fsm_state3 );
    sensitive << ( v165_0_0_reg_193 );

    SC_METHOD(thread_icmp_ln271_fu_350_p2);
    sensitive << ( ap_CS_fsm_state4 );
    sensitive << ( v167_0_reg_204 );

    SC_METHOD(thread_icmp_ln273_fu_388_p2);
    sensitive << ( ap_CS_fsm_state5 );
    sensitive << ( v169_0_0_reg_215 );

    SC_METHOD(thread_icmp_ln280_fu_414_p2);
    sensitive << ( ap_CS_fsm_state7 );
    sensitive << ( h2_0_reg_226 );

    SC_METHOD(thread_icmp_ln282_fu_452_p2);
    sensitive << ( ap_CS_fsm_state8 );
    sensitive << ( d2_0_0_reg_237 );

    SC_METHOD(thread_k_proj_0_address0);
    sensitive << ( ap_CS_fsm_state8 );
    sensitive << ( sext_ln291_fu_477_p1 );
    sensitive << ( grp_rotate_half_fu_255_v147_0_address0 );
    sensitive << ( ap_CS_fsm_state6 );

    SC_METHOD(thread_k_proj_0_address1);
    sensitive << ( grp_rotate_half_fu_255_v147_0_address1 );
    sensitive << ( ap_CS_fsm_state6 );

    SC_METHOD(thread_k_proj_0_ce0);
    sensitive << ( ap_CS_fsm_state8 );
    sensitive << ( grp_rotate_half_fu_255_v147_0_ce0 );
    sensitive << ( ap_CS_fsm_state6 );

    SC_METHOD(thread_k_proj_0_ce1);
    sensitive << ( grp_rotate_half_fu_255_v147_0_ce1 );
    sensitive << ( ap_CS_fsm_state6 );

    SC_METHOD(thread_q_proj_0_address0);
    sensitive << ( ap_CS_fsm_state8 );
    sensitive << ( sext_ln291_fu_477_p1 );
    sensitive << ( grp_rotate_half_fu_248_v147_0_address0 );
    sensitive << ( ap_CS_fsm_state6 );

    SC_METHOD(thread_q_proj_0_address1);
    sensitive << ( grp_rotate_half_fu_248_v147_0_address1 );
    sensitive << ( ap_CS_fsm_state6 );

    SC_METHOD(thread_q_proj_0_ce0);
    sensitive << ( ap_CS_fsm_state8 );
    sensitive << ( grp_rotate_half_fu_248_v147_0_ce0 );
    sensitive << ( ap_CS_fsm_state6 );

    SC_METHOD(thread_q_proj_0_ce1);
    sensitive << ( grp_rotate_half_fu_248_v147_0_ce1 );
    sensitive << ( ap_CS_fsm_state6 );

    SC_METHOD(thread_rotated_k_0_address0);
    sensitive << ( ap_CS_fsm_state5 );
    sensitive << ( ap_CS_fsm_state8 );
    sensitive << ( sext_ln291_fu_477_p1 );
    sensitive << ( grp_rotate_half_fu_255_v148_0_address0 );
    sensitive << ( ap_CS_fsm_state6 );
    sensitive << ( sext_ln274_fu_409_p1 );

    SC_METHOD(thread_rotated_k_0_ce0);
    sensitive << ( ap_CS_fsm_state5 );
    sensitive << ( ap_CS_fsm_state8 );
    sensitive << ( grp_rotate_half_fu_255_v148_0_ce0 );
    sensitive << ( ap_CS_fsm_state6 );

    SC_METHOD(thread_rotated_k_0_ce1);
    sensitive << ( grp_rotate_half_fu_255_v148_0_ce1 );
    sensitive << ( ap_CS_fsm_state6 );

    SC_METHOD(thread_rotated_k_0_d0);
    sensitive << ( ap_CS_fsm_state5 );
    sensitive << ( grp_rotate_half_fu_255_v148_0_d0 );
    sensitive << ( ap_CS_fsm_state6 );

    SC_METHOD(thread_rotated_k_0_we0);
    sensitive << ( ap_CS_fsm_state5 );
    sensitive << ( grp_rotate_half_fu_255_v148_0_we0 );
    sensitive << ( icmp_ln273_fu_388_p2 );
    sensitive << ( ap_CS_fsm_state6 );

    SC_METHOD(thread_rotated_k_0_we1);
    sensitive << ( grp_rotate_half_fu_255_v148_0_we1 );
    sensitive << ( ap_CS_fsm_state6 );

    SC_METHOD(thread_rotated_q_0_address0);
    sensitive << ( ap_CS_fsm_state3 );
    sensitive << ( ap_CS_fsm_state8 );
    sensitive << ( sext_ln291_fu_477_p1 );
    sensitive << ( grp_rotate_half_fu_248_v148_0_address0 );
    sensitive << ( ap_CS_fsm_state6 );
    sensitive << ( sext_ln266_fu_345_p1 );

    SC_METHOD(thread_rotated_q_0_ce0);
    sensitive << ( ap_CS_fsm_state3 );
    sensitive << ( ap_CS_fsm_state8 );
    sensitive << ( grp_rotate_half_fu_248_v148_0_ce0 );
    sensitive << ( ap_CS_fsm_state6 );

    SC_METHOD(thread_rotated_q_0_ce1);
    sensitive << ( grp_rotate_half_fu_248_v148_0_ce1 );
    sensitive << ( ap_CS_fsm_state6 );

    SC_METHOD(thread_rotated_q_0_d0);
    sensitive << ( ap_CS_fsm_state3 );
    sensitive << ( grp_rotate_half_fu_248_v148_0_d0 );
    sensitive << ( ap_CS_fsm_state6 );

    SC_METHOD(thread_rotated_q_0_we0);
    sensitive << ( ap_CS_fsm_state3 );
    sensitive << ( grp_rotate_half_fu_248_v148_0_we0 );
    sensitive << ( icmp_ln265_fu_324_p2 );
    sensitive << ( ap_CS_fsm_state6 );

    SC_METHOD(thread_rotated_q_0_we1);
    sensitive << ( grp_rotate_half_fu_248_v148_0_we1 );
    sensitive << ( ap_CS_fsm_state6 );

    SC_METHOD(thread_sext_ln266_fu_345_p1);
    sensitive << ( add_ln266_fu_340_p2 );

    SC_METHOD(thread_sext_ln274_fu_409_p1);
    sensitive << ( add_ln274_fu_404_p2 );

    SC_METHOD(thread_sext_ln291_fu_477_p1);
    sensitive << ( add_ln291_fu_472_p2 );

    SC_METHOD(thread_sub_ln266_fu_318_p2);
    sensitive << ( tmp_s_fu_298_p3 );
    sensitive << ( zext_ln266_fu_314_p1 );

    SC_METHOD(thread_sub_ln274_fu_382_p2);
    sensitive << ( tmp_45_fu_362_p3 );
    sensitive << ( zext_ln274_fu_378_p1 );

    SC_METHOD(thread_sub_ln291_fu_446_p2);
    sensitive << ( tmp_47_fu_426_p3 );
    sensitive << ( zext_ln291_fu_442_p1 );

    SC_METHOD(thread_tmp_44_fu_306_p3);
    sensitive << ( v163_0_reg_182 );

    SC_METHOD(thread_tmp_45_fu_362_p3);
    sensitive << ( v167_0_reg_204 );

    SC_METHOD(thread_tmp_46_fu_370_p3);
    sensitive << ( v167_0_reg_204 );

    SC_METHOD(thread_tmp_47_fu_426_p3);
    sensitive << ( h2_0_reg_226 );

    SC_METHOD(thread_tmp_48_fu_434_p3);
    sensitive << ( h2_0_reg_226 );

    SC_METHOD(thread_tmp_s_fu_298_p3);
    sensitive << ( v163_0_reg_182 );

    SC_METHOD(thread_v157_address0);
    sensitive << ( ap_CS_fsm_state8 );
    sensitive << ( zext_ln284_fu_491_p1 );

    SC_METHOD(thread_v157_ce0);
    sensitive << ( ap_CS_fsm_state8 );

    SC_METHOD(thread_v158_address0);
    sensitive << ( ap_CS_fsm_state8 );
    sensitive << ( zext_ln284_fu_491_p1 );

    SC_METHOD(thread_v158_ce0);
    sensitive << ( ap_CS_fsm_state8 );

    SC_METHOD(thread_v159_0_address0);
    sensitive << ( sext_ln291_reg_560 );
    sensitive << ( ap_CS_fsm_state19 );

    SC_METHOD(thread_v159_0_ce0);
    sensitive << ( ap_CS_fsm_state19 );

    SC_METHOD(thread_v159_0_d0);
    sensitive << ( v9_reg_648 );
    sensitive << ( ap_CS_fsm_state19 );

    SC_METHOD(thread_v159_0_we0);
    sensitive << ( ap_CS_fsm_state19 );

    SC_METHOD(thread_v160_0_address0);
    sensitive << ( sext_ln291_reg_560 );
    sensitive << ( ap_CS_fsm_state19 );

    SC_METHOD(thread_v160_0_ce0);
    sensitive << ( ap_CS_fsm_state19 );

    SC_METHOD(thread_v160_0_d0);
    sensitive << ( v3_reg_653 );
    sensitive << ( ap_CS_fsm_state19 );

    SC_METHOD(thread_v160_0_we0);
    sensitive << ( ap_CS_fsm_state19 );

    SC_METHOD(thread_v163_fu_292_p2);
    sensitive << ( v163_0_reg_182 );

    SC_METHOD(thread_v167_fu_356_p2);
    sensitive << ( v167_0_reg_204 );

    SC_METHOD(thread_zext_ln266_1_fu_336_p1);
    sensitive << ( v165_0_0_reg_193 );

    SC_METHOD(thread_zext_ln266_fu_314_p1);
    sensitive << ( tmp_44_fu_306_p3 );

    SC_METHOD(thread_zext_ln274_1_fu_400_p1);
    sensitive << ( v169_0_0_reg_215 );

    SC_METHOD(thread_zext_ln274_fu_378_p1);
    sensitive << ( tmp_46_fu_370_p3 );

    SC_METHOD(thread_zext_ln284_fu_491_p1);
    sensitive << ( add_ln284_fu_485_p2 );

    SC_METHOD(thread_zext_ln291_1_fu_464_p1);
    sensitive << ( d2_0_0_reg_237 );

    SC_METHOD(thread_zext_ln291_2_fu_468_p1);
    sensitive << ( d2_0_0_reg_237 );

    SC_METHOD(thread_zext_ln291_fu_442_p1);
    sensitive << ( tmp_48_fu_434_p3 );

    SC_METHOD(thread_ap_NS_fsm);
    sensitive << ( ap_start );
    sensitive << ( ap_CS_fsm );
    sensitive << ( ap_CS_fsm_state1 );
    sensitive << ( ap_CS_fsm_state2 );
    sensitive << ( icmp_ln263_fu_286_p2 );
    sensitive << ( ap_CS_fsm_state3 );
    sensitive << ( ap_CS_fsm_state4 );
    sensitive << ( icmp_ln271_fu_350_p2 );
    sensitive << ( ap_CS_fsm_state5 );
    sensitive << ( ap_CS_fsm_state7 );
    sensitive << ( icmp_ln280_fu_414_p2 );
    sensitive << ( ap_CS_fsm_state8 );
    sensitive << ( icmp_ln282_fu_452_p2 );
    sensitive << ( icmp_ln265_fu_324_p2 );
    sensitive << ( icmp_ln273_fu_388_p2 );
    sensitive << ( ap_CS_fsm_state6 );
    sensitive << ( ap_block_state6_on_subcall_done );

    SC_THREAD(thread_ap_var_for_const0);

    ap_CS_fsm = "0000000000000000001";
    grp_rotate_half_fu_248_ap_start_reg = SC_LOGIC_0;
    grp_rotate_half_fu_255_ap_start_reg = SC_LOGIC_0;
    static int apTFileNum = 0;
    stringstream apTFilenSS;
    apTFilenSS << "apply_rotary_pos_emb_sc_trace_" << apTFileNum ++;
    string apTFn = apTFilenSS.str();
    mVcdFile = sc_create_vcd_trace_file(apTFn.c_str());
    mVcdFile->set_time_unit(1, SC_PS);
    if (1) {
#ifdef __HLS_TRACE_LEVEL_PORT_HIER__
    sc_trace(mVcdFile, ap_clk, "(port)ap_clk");
    sc_trace(mVcdFile, ap_rst, "(port)ap_rst");
    sc_trace(mVcdFile, ap_start, "(port)ap_start");
    sc_trace(mVcdFile, ap_done, "(port)ap_done");
    sc_trace(mVcdFile, ap_idle, "(port)ap_idle");
    sc_trace(mVcdFile, ap_ready, "(port)ap_ready");
    sc_trace(mVcdFile, v157_address0, "(port)v157_address0");
    sc_trace(mVcdFile, v157_ce0, "(port)v157_ce0");
    sc_trace(mVcdFile, v157_q0, "(port)v157_q0");
    sc_trace(mVcdFile, v158_address0, "(port)v158_address0");
    sc_trace(mVcdFile, v158_ce0, "(port)v158_ce0");
    sc_trace(mVcdFile, v158_q0, "(port)v158_q0");
    sc_trace(mVcdFile, v159_0_address0, "(port)v159_0_address0");
    sc_trace(mVcdFile, v159_0_ce0, "(port)v159_0_ce0");
    sc_trace(mVcdFile, v159_0_we0, "(port)v159_0_we0");
    sc_trace(mVcdFile, v159_0_d0, "(port)v159_0_d0");
    sc_trace(mVcdFile, v160_0_address0, "(port)v160_0_address0");
    sc_trace(mVcdFile, v160_0_ce0, "(port)v160_0_ce0");
    sc_trace(mVcdFile, v160_0_we0, "(port)v160_0_we0");
    sc_trace(mVcdFile, v160_0_d0, "(port)v160_0_d0");
    sc_trace(mVcdFile, q_proj_0_address0, "(port)q_proj_0_address0");
    sc_trace(mVcdFile, q_proj_0_ce0, "(port)q_proj_0_ce0");
    sc_trace(mVcdFile, q_proj_0_q0, "(port)q_proj_0_q0");
    sc_trace(mVcdFile, q_proj_0_address1, "(port)q_proj_0_address1");
    sc_trace(mVcdFile, q_proj_0_ce1, "(port)q_proj_0_ce1");
    sc_trace(mVcdFile, q_proj_0_q1, "(port)q_proj_0_q1");
    sc_trace(mVcdFile, k_proj_0_address0, "(port)k_proj_0_address0");
    sc_trace(mVcdFile, k_proj_0_ce0, "(port)k_proj_0_ce0");
    sc_trace(mVcdFile, k_proj_0_q0, "(port)k_proj_0_q0");
    sc_trace(mVcdFile, k_proj_0_address1, "(port)k_proj_0_address1");
    sc_trace(mVcdFile, k_proj_0_ce1, "(port)k_proj_0_ce1");
    sc_trace(mVcdFile, k_proj_0_q1, "(port)k_proj_0_q1");
#endif
#ifdef __HLS_TRACE_LEVEL_INT__
    sc_trace(mVcdFile, ap_CS_fsm, "ap_CS_fsm");
    sc_trace(mVcdFile, ap_CS_fsm_state1, "ap_CS_fsm_state1");
    sc_trace(mVcdFile, v163_fu_292_p2, "v163_fu_292_p2");
    sc_trace(mVcdFile, v163_reg_500, "v163_reg_500");
    sc_trace(mVcdFile, ap_CS_fsm_state2, "ap_CS_fsm_state2");
    sc_trace(mVcdFile, sub_ln266_fu_318_p2, "sub_ln266_fu_318_p2");
    sc_trace(mVcdFile, sub_ln266_reg_505, "sub_ln266_reg_505");
    sc_trace(mVcdFile, icmp_ln263_fu_286_p2, "icmp_ln263_fu_286_p2");
    sc_trace(mVcdFile, add_ln265_fu_330_p2, "add_ln265_fu_330_p2");
    sc_trace(mVcdFile, ap_CS_fsm_state3, "ap_CS_fsm_state3");
    sc_trace(mVcdFile, v167_fu_356_p2, "v167_fu_356_p2");
    sc_trace(mVcdFile, v167_reg_521, "v167_reg_521");
    sc_trace(mVcdFile, ap_CS_fsm_state4, "ap_CS_fsm_state4");
    sc_trace(mVcdFile, sub_ln274_fu_382_p2, "sub_ln274_fu_382_p2");
    sc_trace(mVcdFile, sub_ln274_reg_526, "sub_ln274_reg_526");
    sc_trace(mVcdFile, icmp_ln271_fu_350_p2, "icmp_ln271_fu_350_p2");
    sc_trace(mVcdFile, add_ln273_fu_394_p2, "add_ln273_fu_394_p2");
    sc_trace(mVcdFile, ap_CS_fsm_state5, "ap_CS_fsm_state5");
    sc_trace(mVcdFile, h2_fu_420_p2, "h2_fu_420_p2");
    sc_trace(mVcdFile, h2_reg_542, "h2_reg_542");
    sc_trace(mVcdFile, ap_CS_fsm_state7, "ap_CS_fsm_state7");
    sc_trace(mVcdFile, sub_ln291_fu_446_p2, "sub_ln291_fu_446_p2");
    sc_trace(mVcdFile, sub_ln291_reg_547, "sub_ln291_reg_547");
    sc_trace(mVcdFile, icmp_ln280_fu_414_p2, "icmp_ln280_fu_414_p2");
    sc_trace(mVcdFile, add_ln282_fu_458_p2, "add_ln282_fu_458_p2");
    sc_trace(mVcdFile, add_ln282_reg_555, "add_ln282_reg_555");
    sc_trace(mVcdFile, ap_CS_fsm_state8, "ap_CS_fsm_state8");
    sc_trace(mVcdFile, sext_ln291_fu_477_p1, "sext_ln291_fu_477_p1");
    sc_trace(mVcdFile, sext_ln291_reg_560, "sext_ln291_reg_560");
    sc_trace(mVcdFile, icmp_ln282_fu_452_p2, "icmp_ln282_fu_452_p2");
    sc_trace(mVcdFile, q_proj_0_load_reg_596, "q_proj_0_load_reg_596");
    sc_trace(mVcdFile, ap_CS_fsm_state9, "ap_CS_fsm_state9");
    sc_trace(mVcdFile, v157_load_reg_601, "v157_load_reg_601");
    sc_trace(mVcdFile, rotated_q_0_q0, "rotated_q_0_q0");
    sc_trace(mVcdFile, rotated_q_0_load_reg_607, "rotated_q_0_load_reg_607");
    sc_trace(mVcdFile, v158_load_reg_612, "v158_load_reg_612");
    sc_trace(mVcdFile, k_proj_0_load_reg_618, "k_proj_0_load_reg_618");
    sc_trace(mVcdFile, rotated_k_0_q0, "rotated_k_0_q0");
    sc_trace(mVcdFile, rotated_k_0_load_reg_623, "rotated_k_0_load_reg_623");
    sc_trace(mVcdFile, grp_fu_270_p2, "grp_fu_270_p2");
    sc_trace(mVcdFile, v_reg_628, "v_reg_628");
    sc_trace(mVcdFile, ap_CS_fsm_state13, "ap_CS_fsm_state13");
    sc_trace(mVcdFile, grp_fu_274_p2, "grp_fu_274_p2");
    sc_trace(mVcdFile, v8_reg_633, "v8_reg_633");
    sc_trace(mVcdFile, grp_fu_278_p2, "grp_fu_278_p2");
    sc_trace(mVcdFile, v1_reg_638, "v1_reg_638");
    sc_trace(mVcdFile, grp_fu_282_p2, "grp_fu_282_p2");
    sc_trace(mVcdFile, v2_reg_643, "v2_reg_643");
    sc_trace(mVcdFile, grp_fu_262_p2, "grp_fu_262_p2");
    sc_trace(mVcdFile, v9_reg_648, "v9_reg_648");
    sc_trace(mVcdFile, ap_CS_fsm_state18, "ap_CS_fsm_state18");
    sc_trace(mVcdFile, grp_fu_266_p2, "grp_fu_266_p2");
    sc_trace(mVcdFile, v3_reg_653, "v3_reg_653");
    sc_trace(mVcdFile, rotated_q_0_address0, "rotated_q_0_address0");
    sc_trace(mVcdFile, rotated_q_0_ce0, "rotated_q_0_ce0");
    sc_trace(mVcdFile, rotated_q_0_we0, "rotated_q_0_we0");
    sc_trace(mVcdFile, rotated_q_0_d0, "rotated_q_0_d0");
    sc_trace(mVcdFile, rotated_q_0_ce1, "rotated_q_0_ce1");
    sc_trace(mVcdFile, rotated_q_0_we1, "rotated_q_0_we1");
    sc_trace(mVcdFile, rotated_k_0_address0, "rotated_k_0_address0");
    sc_trace(mVcdFile, rotated_k_0_ce0, "rotated_k_0_ce0");
    sc_trace(mVcdFile, rotated_k_0_we0, "rotated_k_0_we0");
    sc_trace(mVcdFile, rotated_k_0_d0, "rotated_k_0_d0");
    sc_trace(mVcdFile, rotated_k_0_ce1, "rotated_k_0_ce1");
    sc_trace(mVcdFile, rotated_k_0_we1, "rotated_k_0_we1");
    sc_trace(mVcdFile, grp_rotate_half_fu_248_ap_start, "grp_rotate_half_fu_248_ap_start");
    sc_trace(mVcdFile, grp_rotate_half_fu_248_ap_done, "grp_rotate_half_fu_248_ap_done");
    sc_trace(mVcdFile, grp_rotate_half_fu_248_ap_idle, "grp_rotate_half_fu_248_ap_idle");
    sc_trace(mVcdFile, grp_rotate_half_fu_248_ap_ready, "grp_rotate_half_fu_248_ap_ready");
    sc_trace(mVcdFile, grp_rotate_half_fu_248_v147_0_address0, "grp_rotate_half_fu_248_v147_0_address0");
    sc_trace(mVcdFile, grp_rotate_half_fu_248_v147_0_ce0, "grp_rotate_half_fu_248_v147_0_ce0");
    sc_trace(mVcdFile, grp_rotate_half_fu_248_v147_0_address1, "grp_rotate_half_fu_248_v147_0_address1");
    sc_trace(mVcdFile, grp_rotate_half_fu_248_v147_0_ce1, "grp_rotate_half_fu_248_v147_0_ce1");
    sc_trace(mVcdFile, grp_rotate_half_fu_248_v148_0_address0, "grp_rotate_half_fu_248_v148_0_address0");
    sc_trace(mVcdFile, grp_rotate_half_fu_248_v148_0_ce0, "grp_rotate_half_fu_248_v148_0_ce0");
    sc_trace(mVcdFile, grp_rotate_half_fu_248_v148_0_we0, "grp_rotate_half_fu_248_v148_0_we0");
    sc_trace(mVcdFile, grp_rotate_half_fu_248_v148_0_d0, "grp_rotate_half_fu_248_v148_0_d0");
    sc_trace(mVcdFile, grp_rotate_half_fu_248_v148_0_address1, "grp_rotate_half_fu_248_v148_0_address1");
    sc_trace(mVcdFile, grp_rotate_half_fu_248_v148_0_ce1, "grp_rotate_half_fu_248_v148_0_ce1");
    sc_trace(mVcdFile, grp_rotate_half_fu_248_v148_0_we1, "grp_rotate_half_fu_248_v148_0_we1");
    sc_trace(mVcdFile, grp_rotate_half_fu_248_v148_0_d1, "grp_rotate_half_fu_248_v148_0_d1");
    sc_trace(mVcdFile, grp_rotate_half_fu_255_ap_start, "grp_rotate_half_fu_255_ap_start");
    sc_trace(mVcdFile, grp_rotate_half_fu_255_ap_done, "grp_rotate_half_fu_255_ap_done");
    sc_trace(mVcdFile, grp_rotate_half_fu_255_ap_idle, "grp_rotate_half_fu_255_ap_idle");
    sc_trace(mVcdFile, grp_rotate_half_fu_255_ap_ready, "grp_rotate_half_fu_255_ap_ready");
    sc_trace(mVcdFile, grp_rotate_half_fu_255_v147_0_address0, "grp_rotate_half_fu_255_v147_0_address0");
    sc_trace(mVcdFile, grp_rotate_half_fu_255_v147_0_ce0, "grp_rotate_half_fu_255_v147_0_ce0");
    sc_trace(mVcdFile, grp_rotate_half_fu_255_v147_0_address1, "grp_rotate_half_fu_255_v147_0_address1");
    sc_trace(mVcdFile, grp_rotate_half_fu_255_v147_0_ce1, "grp_rotate_half_fu_255_v147_0_ce1");
    sc_trace(mVcdFile, grp_rotate_half_fu_255_v148_0_address0, "grp_rotate_half_fu_255_v148_0_address0");
    sc_trace(mVcdFile, grp_rotate_half_fu_255_v148_0_ce0, "grp_rotate_half_fu_255_v148_0_ce0");
    sc_trace(mVcdFile, grp_rotate_half_fu_255_v148_0_we0, "grp_rotate_half_fu_255_v148_0_we0");
    sc_trace(mVcdFile, grp_rotate_half_fu_255_v148_0_d0, "grp_rotate_half_fu_255_v148_0_d0");
    sc_trace(mVcdFile, grp_rotate_half_fu_255_v148_0_address1, "grp_rotate_half_fu_255_v148_0_address1");
    sc_trace(mVcdFile, grp_rotate_half_fu_255_v148_0_ce1, "grp_rotate_half_fu_255_v148_0_ce1");
    sc_trace(mVcdFile, grp_rotate_half_fu_255_v148_0_we1, "grp_rotate_half_fu_255_v148_0_we1");
    sc_trace(mVcdFile, grp_rotate_half_fu_255_v148_0_d1, "grp_rotate_half_fu_255_v148_0_d1");
    sc_trace(mVcdFile, v163_0_reg_182, "v163_0_reg_182");
    sc_trace(mVcdFile, icmp_ln265_fu_324_p2, "icmp_ln265_fu_324_p2");
    sc_trace(mVcdFile, v165_0_0_reg_193, "v165_0_0_reg_193");
    sc_trace(mVcdFile, v167_0_reg_204, "v167_0_reg_204");
    sc_trace(mVcdFile, icmp_ln273_fu_388_p2, "icmp_ln273_fu_388_p2");
    sc_trace(mVcdFile, v169_0_0_reg_215, "v169_0_0_reg_215");
    sc_trace(mVcdFile, h2_0_reg_226, "h2_0_reg_226");
    sc_trace(mVcdFile, ap_CS_fsm_state6, "ap_CS_fsm_state6");
    sc_trace(mVcdFile, ap_block_state6_on_subcall_done, "ap_block_state6_on_subcall_done");
    sc_trace(mVcdFile, d2_0_0_reg_237, "d2_0_0_reg_237");
    sc_trace(mVcdFile, ap_CS_fsm_state19, "ap_CS_fsm_state19");
    sc_trace(mVcdFile, grp_rotate_half_fu_248_ap_start_reg, "grp_rotate_half_fu_248_ap_start_reg");
    sc_trace(mVcdFile, grp_rotate_half_fu_255_ap_start_reg, "grp_rotate_half_fu_255_ap_start_reg");
    sc_trace(mVcdFile, sext_ln266_fu_345_p1, "sext_ln266_fu_345_p1");
    sc_trace(mVcdFile, sext_ln274_fu_409_p1, "sext_ln274_fu_409_p1");
    sc_trace(mVcdFile, zext_ln284_fu_491_p1, "zext_ln284_fu_491_p1");
    sc_trace(mVcdFile, ap_CS_fsm_state14, "ap_CS_fsm_state14");
    sc_trace(mVcdFile, ap_CS_fsm_state10, "ap_CS_fsm_state10");
    sc_trace(mVcdFile, tmp_44_fu_306_p3, "tmp_44_fu_306_p3");
    sc_trace(mVcdFile, tmp_s_fu_298_p3, "tmp_s_fu_298_p3");
    sc_trace(mVcdFile, zext_ln266_fu_314_p1, "zext_ln266_fu_314_p1");
    sc_trace(mVcdFile, zext_ln266_1_fu_336_p1, "zext_ln266_1_fu_336_p1");
    sc_trace(mVcdFile, add_ln266_fu_340_p2, "add_ln266_fu_340_p2");
    sc_trace(mVcdFile, tmp_46_fu_370_p3, "tmp_46_fu_370_p3");
    sc_trace(mVcdFile, tmp_45_fu_362_p3, "tmp_45_fu_362_p3");
    sc_trace(mVcdFile, zext_ln274_fu_378_p1, "zext_ln274_fu_378_p1");
    sc_trace(mVcdFile, zext_ln274_1_fu_400_p1, "zext_ln274_1_fu_400_p1");
    sc_trace(mVcdFile, add_ln274_fu_404_p2, "add_ln274_fu_404_p2");
    sc_trace(mVcdFile, tmp_48_fu_434_p3, "tmp_48_fu_434_p3");
    sc_trace(mVcdFile, tmp_47_fu_426_p3, "tmp_47_fu_426_p3");
    sc_trace(mVcdFile, zext_ln291_fu_442_p1, "zext_ln291_fu_442_p1");
    sc_trace(mVcdFile, zext_ln291_2_fu_468_p1, "zext_ln291_2_fu_468_p1");
    sc_trace(mVcdFile, add_ln291_fu_472_p2, "add_ln291_fu_472_p2");
    sc_trace(mVcdFile, zext_ln291_1_fu_464_p1, "zext_ln291_1_fu_464_p1");
    sc_trace(mVcdFile, add_ln284_fu_485_p2, "add_ln284_fu_485_p2");
    sc_trace(mVcdFile, ap_NS_fsm, "ap_NS_fsm");
#endif

    }
}

apply_rotary_pos_emb::~apply_rotary_pos_emb() {
    if (mVcdFile) 
        sc_close_vcd_trace_file(mVcdFile);

    delete rotated_q_0_U;
    delete rotated_k_0_U;
    delete grp_rotate_half_fu_248;
    delete grp_rotate_half_fu_255;
    delete attention_fadd_32pcA_U55;
    delete attention_fadd_32pcA_U56;
    delete attention_fmul_32qcK_U57;
    delete attention_fmul_32qcK_U58;
    delete attention_fmul_32qcK_U59;
    delete attention_fmul_32qcK_U60;
}

void apply_rotary_pos_emb::thread_ap_var_for_const0() {
    ap_var_for_const0 = ap_const_logic_1;
}

void apply_rotary_pos_emb::thread_ap_clk_no_reset_() {
    if ( ap_rst.read() == ap_const_logic_1) {
        ap_CS_fsm = ap_ST_fsm_state1;
    } else {
        ap_CS_fsm = ap_NS_fsm.read();
    }
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state19.read())) {
        d2_0_0_reg_237 = add_ln282_reg_555.read();
    } else if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state7.read()) && 
                esl_seteq<1,1,1>(ap_const_lv1_0, icmp_ln280_fu_414_p2.read()))) {
        d2_0_0_reg_237 = ap_const_lv7_0;
    }
    if ( ap_rst.read() == ap_const_logic_1) {
        grp_rotate_half_fu_248_ap_start_reg = ap_const_logic_0;
    } else {
        if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state4.read()) && 
             esl_seteq<1,1,1>(icmp_ln271_fu_350_p2.read(), ap_const_lv1_1))) {
            grp_rotate_half_fu_248_ap_start_reg = ap_const_logic_1;
        } else if (esl_seteq<1,1,1>(ap_const_logic_1, grp_rotate_half_fu_248_ap_ready.read())) {
            grp_rotate_half_fu_248_ap_start_reg = ap_const_logic_0;
        }
    }
    if ( ap_rst.read() == ap_const_logic_1) {
        grp_rotate_half_fu_255_ap_start_reg = ap_const_logic_0;
    } else {
        if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state4.read()) && 
             esl_seteq<1,1,1>(icmp_ln271_fu_350_p2.read(), ap_const_lv1_1))) {
            grp_rotate_half_fu_255_ap_start_reg = ap_const_logic_1;
        } else if (esl_seteq<1,1,1>(ap_const_logic_1, grp_rotate_half_fu_255_ap_ready.read())) {
            grp_rotate_half_fu_255_ap_start_reg = ap_const_logic_0;
        }
    }
    if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state8.read()) && 
         esl_seteq<1,1,1>(icmp_ln282_fu_452_p2.read(), ap_const_lv1_1))) {
        h2_0_reg_226 = h2_reg_542.read();
    } else if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read()) && 
                esl_seteq<1,1,1>(ap_block_state6_on_subcall_done.read(), ap_const_boolean_0))) {
        h2_0_reg_226 = ap_const_lv5_0;
    }
    if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state3.read()) && 
         esl_seteq<1,1,1>(icmp_ln265_fu_324_p2.read(), ap_const_lv1_1))) {
        v163_0_reg_182 = v163_reg_500.read();
    } else if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state1.read()) && 
                esl_seteq<1,1,1>(ap_start.read(), ap_const_logic_1))) {
        v163_0_reg_182 = ap_const_lv5_0;
    }
    if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state2.read()) && 
         esl_seteq<1,1,1>(icmp_ln263_fu_286_p2.read(), ap_const_lv1_0))) {
        v165_0_0_reg_193 = ap_const_lv7_0;
    } else if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state3.read()) && 
                esl_seteq<1,1,1>(ap_const_lv1_0, icmp_ln265_fu_324_p2.read()))) {
        v165_0_0_reg_193 = add_ln265_fu_330_p2.read();
    }
    if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state2.read()) && 
         esl_seteq<1,1,1>(icmp_ln263_fu_286_p2.read(), ap_const_lv1_1))) {
        v167_0_reg_204 = ap_const_lv5_0;
    } else if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state5.read()) && 
                esl_seteq<1,1,1>(ap_const_lv1_1, icmp_ln273_fu_388_p2.read()))) {
        v167_0_reg_204 = v167_reg_521.read();
    }
    if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state4.read()) && 
         esl_seteq<1,1,1>(ap_const_lv1_0, icmp_ln271_fu_350_p2.read()))) {
        v169_0_0_reg_215 = ap_const_lv7_0;
    } else if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state5.read()) && 
                esl_seteq<1,1,1>(ap_const_lv1_0, icmp_ln273_fu_388_p2.read()))) {
        v169_0_0_reg_215 = add_ln273_fu_394_p2.read();
    }
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state8.read())) {
        add_ln282_reg_555 = add_ln282_fu_458_p2.read();
    }
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state7.read())) {
        h2_reg_542 = h2_fu_420_p2.read();
    }
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state9.read())) {
        k_proj_0_load_reg_618 = k_proj_0_q0.read();
        q_proj_0_load_reg_596 = q_proj_0_q0.read();
        rotated_k_0_load_reg_623 = rotated_k_0_q0.read();
        rotated_q_0_load_reg_607 = rotated_q_0_q0.read();
        v157_load_reg_601 = v157_q0.read();
        v158_load_reg_612 = v158_q0.read();
    }
    if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state8.read()) && esl_seteq<1,1,1>(ap_const_lv1_0, icmp_ln282_fu_452_p2.read()))) {
        sext_ln291_reg_560 = sext_ln291_fu_477_p1.read();
    }
    if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state2.read()) && esl_seteq<1,1,1>(icmp_ln263_fu_286_p2.read(), ap_const_lv1_0))) {
        sub_ln266_reg_505 = sub_ln266_fu_318_p2.read();
    }
    if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state4.read()) && esl_seteq<1,1,1>(ap_const_lv1_0, icmp_ln271_fu_350_p2.read()))) {
        sub_ln274_reg_526 = sub_ln274_fu_382_p2.read();
    }
    if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state7.read()) && esl_seteq<1,1,1>(ap_const_lv1_0, icmp_ln280_fu_414_p2.read()))) {
        sub_ln291_reg_547 = sub_ln291_fu_446_p2.read();
    }
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state2.read())) {
        v163_reg_500 = v163_fu_292_p2.read();
    }
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state4.read())) {
        v167_reg_521 = v167_fu_356_p2.read();
    }
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state13.read())) {
        v1_reg_638 = grp_fu_278_p2.read();
        v2_reg_643 = grp_fu_282_p2.read();
        v8_reg_633 = grp_fu_274_p2.read();
        v_reg_628 = grp_fu_270_p2.read();
    }
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state18.read())) {
        v3_reg_653 = grp_fu_266_p2.read();
        v9_reg_648 = grp_fu_262_p2.read();
    }
}

void apply_rotary_pos_emb::thread_add_ln265_fu_330_p2() {
    add_ln265_fu_330_p2 = (!v165_0_0_reg_193.read().is_01() || !ap_const_lv7_1.is_01())? sc_lv<7>(): (sc_biguint<7>(v165_0_0_reg_193.read()) + sc_biguint<7>(ap_const_lv7_1));
}

void apply_rotary_pos_emb::thread_add_ln266_fu_340_p2() {
    add_ln266_fu_340_p2 = (!sub_ln266_reg_505.read().is_01() || !zext_ln266_1_fu_336_p1.read().is_01())? sc_lv<12>(): (sc_biguint<12>(sub_ln266_reg_505.read()) + sc_biguint<12>(zext_ln266_1_fu_336_p1.read()));
}

void apply_rotary_pos_emb::thread_add_ln273_fu_394_p2() {
    add_ln273_fu_394_p2 = (!v169_0_0_reg_215.read().is_01() || !ap_const_lv7_1.is_01())? sc_lv<7>(): (sc_biguint<7>(v169_0_0_reg_215.read()) + sc_biguint<7>(ap_const_lv7_1));
}

void apply_rotary_pos_emb::thread_add_ln274_fu_404_p2() {
    add_ln274_fu_404_p2 = (!sub_ln274_reg_526.read().is_01() || !zext_ln274_1_fu_400_p1.read().is_01())? sc_lv<12>(): (sc_biguint<12>(sub_ln274_reg_526.read()) + sc_biguint<12>(zext_ln274_1_fu_400_p1.read()));
}

void apply_rotary_pos_emb::thread_add_ln282_fu_458_p2() {
    add_ln282_fu_458_p2 = (!d2_0_0_reg_237.read().is_01() || !ap_const_lv7_1.is_01())? sc_lv<7>(): (sc_biguint<7>(d2_0_0_reg_237.read()) + sc_biguint<7>(ap_const_lv7_1));
}

void apply_rotary_pos_emb::thread_add_ln284_fu_485_p2() {
    add_ln284_fu_485_p2 = (!zext_ln291_1_fu_464_p1.read().is_01() || !ap_const_lv10_1E0.is_01())? sc_lv<10>(): (sc_biguint<10>(zext_ln291_1_fu_464_p1.read()) + sc_biguint<10>(ap_const_lv10_1E0));
}

void apply_rotary_pos_emb::thread_add_ln291_fu_472_p2() {
    add_ln291_fu_472_p2 = (!sub_ln291_reg_547.read().is_01() || !zext_ln291_2_fu_468_p1.read().is_01())? sc_lv<12>(): (sc_biguint<12>(sub_ln291_reg_547.read()) + sc_biguint<12>(zext_ln291_2_fu_468_p1.read()));
}

void apply_rotary_pos_emb::thread_ap_CS_fsm_state1() {
    ap_CS_fsm_state1 = ap_CS_fsm.read()[0];
}

void apply_rotary_pos_emb::thread_ap_CS_fsm_state10() {
    ap_CS_fsm_state10 = ap_CS_fsm.read()[9];
}

void apply_rotary_pos_emb::thread_ap_CS_fsm_state13() {
    ap_CS_fsm_state13 = ap_CS_fsm.read()[12];
}

void apply_rotary_pos_emb::thread_ap_CS_fsm_state14() {
    ap_CS_fsm_state14 = ap_CS_fsm.read()[13];
}

void apply_rotary_pos_emb::thread_ap_CS_fsm_state18() {
    ap_CS_fsm_state18 = ap_CS_fsm.read()[17];
}

void apply_rotary_pos_emb::thread_ap_CS_fsm_state19() {
    ap_CS_fsm_state19 = ap_CS_fsm.read()[18];
}

void apply_rotary_pos_emb::thread_ap_CS_fsm_state2() {
    ap_CS_fsm_state2 = ap_CS_fsm.read()[1];
}

void apply_rotary_pos_emb::thread_ap_CS_fsm_state3() {
    ap_CS_fsm_state3 = ap_CS_fsm.read()[2];
}

void apply_rotary_pos_emb::thread_ap_CS_fsm_state4() {
    ap_CS_fsm_state4 = ap_CS_fsm.read()[3];
}

void apply_rotary_pos_emb::thread_ap_CS_fsm_state5() {
    ap_CS_fsm_state5 = ap_CS_fsm.read()[4];
}

void apply_rotary_pos_emb::thread_ap_CS_fsm_state6() {
    ap_CS_fsm_state6 = ap_CS_fsm.read()[5];
}

void apply_rotary_pos_emb::thread_ap_CS_fsm_state7() {
    ap_CS_fsm_state7 = ap_CS_fsm.read()[6];
}

void apply_rotary_pos_emb::thread_ap_CS_fsm_state8() {
    ap_CS_fsm_state8 = ap_CS_fsm.read()[7];
}

void apply_rotary_pos_emb::thread_ap_CS_fsm_state9() {
    ap_CS_fsm_state9 = ap_CS_fsm.read()[8];
}

void apply_rotary_pos_emb::thread_ap_block_state6_on_subcall_done() {
    ap_block_state6_on_subcall_done = (esl_seteq<1,1,1>(ap_const_logic_0, grp_rotate_half_fu_248_ap_done.read()) || esl_seteq<1,1,1>(ap_const_logic_0, grp_rotate_half_fu_255_ap_done.read()));
}

void apply_rotary_pos_emb::thread_ap_done() {
    if (((esl_seteq<1,1,1>(ap_const_logic_0, ap_start.read()) && 
          esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state1.read())) || 
         (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state7.read()) && 
          esl_seteq<1,1,1>(icmp_ln280_fu_414_p2.read(), ap_const_lv1_1)))) {
        ap_done = ap_const_logic_1;
    } else {
        ap_done = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_ap_idle() {
    if ((esl_seteq<1,1,1>(ap_const_logic_0, ap_start.read()) && 
         esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state1.read()))) {
        ap_idle = ap_const_logic_1;
    } else {
        ap_idle = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_ap_ready() {
    if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state7.read()) && 
         esl_seteq<1,1,1>(icmp_ln280_fu_414_p2.read(), ap_const_lv1_1))) {
        ap_ready = ap_const_logic_1;
    } else {
        ap_ready = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_grp_rotate_half_fu_248_ap_start() {
    grp_rotate_half_fu_248_ap_start = grp_rotate_half_fu_248_ap_start_reg.read();
}

void apply_rotary_pos_emb::thread_grp_rotate_half_fu_255_ap_start() {
    grp_rotate_half_fu_255_ap_start = grp_rotate_half_fu_255_ap_start_reg.read();
}

void apply_rotary_pos_emb::thread_h2_fu_420_p2() {
    h2_fu_420_p2 = (!h2_0_reg_226.read().is_01() || !ap_const_lv5_1.is_01())? sc_lv<5>(): (sc_biguint<5>(h2_0_reg_226.read()) + sc_biguint<5>(ap_const_lv5_1));
}

void apply_rotary_pos_emb::thread_icmp_ln263_fu_286_p2() {
    icmp_ln263_fu_286_p2 = (!v163_0_reg_182.read().is_01() || !ap_const_lv5_10.is_01())? sc_lv<1>(): sc_lv<1>(v163_0_reg_182.read() == ap_const_lv5_10);
}

void apply_rotary_pos_emb::thread_icmp_ln265_fu_324_p2() {
    icmp_ln265_fu_324_p2 = (!v165_0_0_reg_193.read().is_01() || !ap_const_lv7_60.is_01())? sc_lv<1>(): sc_lv<1>(v165_0_0_reg_193.read() == ap_const_lv7_60);
}

void apply_rotary_pos_emb::thread_icmp_ln271_fu_350_p2() {
    icmp_ln271_fu_350_p2 = (!v167_0_reg_204.read().is_01() || !ap_const_lv5_10.is_01())? sc_lv<1>(): sc_lv<1>(v167_0_reg_204.read() == ap_const_lv5_10);
}

void apply_rotary_pos_emb::thread_icmp_ln273_fu_388_p2() {
    icmp_ln273_fu_388_p2 = (!v169_0_0_reg_215.read().is_01() || !ap_const_lv7_60.is_01())? sc_lv<1>(): sc_lv<1>(v169_0_0_reg_215.read() == ap_const_lv7_60);
}

void apply_rotary_pos_emb::thread_icmp_ln280_fu_414_p2() {
    icmp_ln280_fu_414_p2 = (!h2_0_reg_226.read().is_01() || !ap_const_lv5_10.is_01())? sc_lv<1>(): sc_lv<1>(h2_0_reg_226.read() == ap_const_lv5_10);
}

void apply_rotary_pos_emb::thread_icmp_ln282_fu_452_p2() {
    icmp_ln282_fu_452_p2 = (!d2_0_0_reg_237.read().is_01() || !ap_const_lv7_60.is_01())? sc_lv<1>(): sc_lv<1>(d2_0_0_reg_237.read() == ap_const_lv7_60);
}

void apply_rotary_pos_emb::thread_k_proj_0_address0() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state8.read())) {
        k_proj_0_address0 =  (sc_lv<11>) (sext_ln291_fu_477_p1.read());
    } else if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read())) {
        k_proj_0_address0 = grp_rotate_half_fu_255_v147_0_address0.read();
    } else {
        k_proj_0_address0 = "XXXXXXXXXXX";
    }
}

void apply_rotary_pos_emb::thread_k_proj_0_address1() {
    k_proj_0_address1 = grp_rotate_half_fu_255_v147_0_address1.read();
}

void apply_rotary_pos_emb::thread_k_proj_0_ce0() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state8.read())) {
        k_proj_0_ce0 = ap_const_logic_1;
    } else if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read())) {
        k_proj_0_ce0 = grp_rotate_half_fu_255_v147_0_ce0.read();
    } else {
        k_proj_0_ce0 = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_k_proj_0_ce1() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read())) {
        k_proj_0_ce1 = grp_rotate_half_fu_255_v147_0_ce1.read();
    } else {
        k_proj_0_ce1 = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_q_proj_0_address0() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state8.read())) {
        q_proj_0_address0 =  (sc_lv<11>) (sext_ln291_fu_477_p1.read());
    } else if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read())) {
        q_proj_0_address0 = grp_rotate_half_fu_248_v147_0_address0.read();
    } else {
        q_proj_0_address0 = "XXXXXXXXXXX";
    }
}

void apply_rotary_pos_emb::thread_q_proj_0_address1() {
    q_proj_0_address1 = grp_rotate_half_fu_248_v147_0_address1.read();
}

void apply_rotary_pos_emb::thread_q_proj_0_ce0() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state8.read())) {
        q_proj_0_ce0 = ap_const_logic_1;
    } else if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read())) {
        q_proj_0_ce0 = grp_rotate_half_fu_248_v147_0_ce0.read();
    } else {
        q_proj_0_ce0 = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_q_proj_0_ce1() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read())) {
        q_proj_0_ce1 = grp_rotate_half_fu_248_v147_0_ce1.read();
    } else {
        q_proj_0_ce1 = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_rotated_k_0_address0() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state8.read())) {
        rotated_k_0_address0 =  (sc_lv<11>) (sext_ln291_fu_477_p1.read());
    } else if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state5.read())) {
        rotated_k_0_address0 =  (sc_lv<11>) (sext_ln274_fu_409_p1.read());
    } else if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read())) {
        rotated_k_0_address0 = grp_rotate_half_fu_255_v148_0_address0.read();
    } else {
        rotated_k_0_address0 = "XXXXXXXXXXX";
    }
}

void apply_rotary_pos_emb::thread_rotated_k_0_ce0() {
    if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state5.read()) || 
         esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state8.read()))) {
        rotated_k_0_ce0 = ap_const_logic_1;
    } else if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read())) {
        rotated_k_0_ce0 = grp_rotate_half_fu_255_v148_0_ce0.read();
    } else {
        rotated_k_0_ce0 = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_rotated_k_0_ce1() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read())) {
        rotated_k_0_ce1 = grp_rotate_half_fu_255_v148_0_ce1.read();
    } else {
        rotated_k_0_ce1 = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_rotated_k_0_d0() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state5.read())) {
        rotated_k_0_d0 = ap_const_lv32_0;
    } else if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read())) {
        rotated_k_0_d0 = grp_rotate_half_fu_255_v148_0_d0.read();
    } else {
        rotated_k_0_d0 =  (sc_lv<32>) ("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX");
    }
}

void apply_rotary_pos_emb::thread_rotated_k_0_we0() {
    if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state5.read()) && 
         esl_seteq<1,1,1>(ap_const_lv1_0, icmp_ln273_fu_388_p2.read()))) {
        rotated_k_0_we0 = ap_const_logic_1;
    } else if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read())) {
        rotated_k_0_we0 = grp_rotate_half_fu_255_v148_0_we0.read();
    } else {
        rotated_k_0_we0 = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_rotated_k_0_we1() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read())) {
        rotated_k_0_we1 = grp_rotate_half_fu_255_v148_0_we1.read();
    } else {
        rotated_k_0_we1 = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_rotated_q_0_address0() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state8.read())) {
        rotated_q_0_address0 =  (sc_lv<11>) (sext_ln291_fu_477_p1.read());
    } else if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state3.read())) {
        rotated_q_0_address0 =  (sc_lv<11>) (sext_ln266_fu_345_p1.read());
    } else if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read())) {
        rotated_q_0_address0 = grp_rotate_half_fu_248_v148_0_address0.read();
    } else {
        rotated_q_0_address0 = "XXXXXXXXXXX";
    }
}

void apply_rotary_pos_emb::thread_rotated_q_0_ce0() {
    if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state3.read()) || 
         esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state8.read()))) {
        rotated_q_0_ce0 = ap_const_logic_1;
    } else if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read())) {
        rotated_q_0_ce0 = grp_rotate_half_fu_248_v148_0_ce0.read();
    } else {
        rotated_q_0_ce0 = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_rotated_q_0_ce1() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read())) {
        rotated_q_0_ce1 = grp_rotate_half_fu_248_v148_0_ce1.read();
    } else {
        rotated_q_0_ce1 = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_rotated_q_0_d0() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state3.read())) {
        rotated_q_0_d0 = ap_const_lv32_0;
    } else if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read())) {
        rotated_q_0_d0 = grp_rotate_half_fu_248_v148_0_d0.read();
    } else {
        rotated_q_0_d0 =  (sc_lv<32>) ("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX");
    }
}

void apply_rotary_pos_emb::thread_rotated_q_0_we0() {
    if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state3.read()) && 
         esl_seteq<1,1,1>(ap_const_lv1_0, icmp_ln265_fu_324_p2.read()))) {
        rotated_q_0_we0 = ap_const_logic_1;
    } else if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read())) {
        rotated_q_0_we0 = grp_rotate_half_fu_248_v148_0_we0.read();
    } else {
        rotated_q_0_we0 = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_rotated_q_0_we1() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read())) {
        rotated_q_0_we1 = grp_rotate_half_fu_248_v148_0_we1.read();
    } else {
        rotated_q_0_we1 = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_sext_ln266_fu_345_p1() {
    sext_ln266_fu_345_p1 = esl_sext<64,12>(add_ln266_fu_340_p2.read());
}

void apply_rotary_pos_emb::thread_sext_ln274_fu_409_p1() {
    sext_ln274_fu_409_p1 = esl_sext<64,12>(add_ln274_fu_404_p2.read());
}

void apply_rotary_pos_emb::thread_sext_ln291_fu_477_p1() {
    sext_ln291_fu_477_p1 = esl_sext<64,12>(add_ln291_fu_472_p2.read());
}

void apply_rotary_pos_emb::thread_sub_ln266_fu_318_p2() {
    sub_ln266_fu_318_p2 = (!tmp_s_fu_298_p3.read().is_01() || !zext_ln266_fu_314_p1.read().is_01())? sc_lv<12>(): (sc_biguint<12>(tmp_s_fu_298_p3.read()) - sc_biguint<12>(zext_ln266_fu_314_p1.read()));
}

void apply_rotary_pos_emb::thread_sub_ln274_fu_382_p2() {
    sub_ln274_fu_382_p2 = (!tmp_45_fu_362_p3.read().is_01() || !zext_ln274_fu_378_p1.read().is_01())? sc_lv<12>(): (sc_biguint<12>(tmp_45_fu_362_p3.read()) - sc_biguint<12>(zext_ln274_fu_378_p1.read()));
}

void apply_rotary_pos_emb::thread_sub_ln291_fu_446_p2() {
    sub_ln291_fu_446_p2 = (!tmp_47_fu_426_p3.read().is_01() || !zext_ln291_fu_442_p1.read().is_01())? sc_lv<12>(): (sc_biguint<12>(tmp_47_fu_426_p3.read()) - sc_biguint<12>(zext_ln291_fu_442_p1.read()));
}

void apply_rotary_pos_emb::thread_tmp_44_fu_306_p3() {
    tmp_44_fu_306_p3 = esl_concat<5,5>(v163_0_reg_182.read(), ap_const_lv5_0);
}

void apply_rotary_pos_emb::thread_tmp_45_fu_362_p3() {
    tmp_45_fu_362_p3 = esl_concat<5,7>(v167_0_reg_204.read(), ap_const_lv7_0);
}

void apply_rotary_pos_emb::thread_tmp_46_fu_370_p3() {
    tmp_46_fu_370_p3 = esl_concat<5,5>(v167_0_reg_204.read(), ap_const_lv5_0);
}

void apply_rotary_pos_emb::thread_tmp_47_fu_426_p3() {
    tmp_47_fu_426_p3 = esl_concat<5,7>(h2_0_reg_226.read(), ap_const_lv7_0);
}

void apply_rotary_pos_emb::thread_tmp_48_fu_434_p3() {
    tmp_48_fu_434_p3 = esl_concat<5,5>(h2_0_reg_226.read(), ap_const_lv5_0);
}

void apply_rotary_pos_emb::thread_tmp_s_fu_298_p3() {
    tmp_s_fu_298_p3 = esl_concat<5,7>(v163_0_reg_182.read(), ap_const_lv7_0);
}

void apply_rotary_pos_emb::thread_v157_address0() {
    v157_address0 =  (sc_lv<10>) (zext_ln284_fu_491_p1.read());
}

void apply_rotary_pos_emb::thread_v157_ce0() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state8.read())) {
        v157_ce0 = ap_const_logic_1;
    } else {
        v157_ce0 = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_v158_address0() {
    v158_address0 =  (sc_lv<10>) (zext_ln284_fu_491_p1.read());
}

void apply_rotary_pos_emb::thread_v158_ce0() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state8.read())) {
        v158_ce0 = ap_const_logic_1;
    } else {
        v158_ce0 = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_v159_0_address0() {
    v159_0_address0 =  (sc_lv<11>) (sext_ln291_reg_560.read());
}

void apply_rotary_pos_emb::thread_v159_0_ce0() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state19.read())) {
        v159_0_ce0 = ap_const_logic_1;
    } else {
        v159_0_ce0 = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_v159_0_d0() {
    v159_0_d0 = v9_reg_648.read();
}

void apply_rotary_pos_emb::thread_v159_0_we0() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state19.read())) {
        v159_0_we0 = ap_const_logic_1;
    } else {
        v159_0_we0 = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_v160_0_address0() {
    v160_0_address0 =  (sc_lv<11>) (sext_ln291_reg_560.read());
}

void apply_rotary_pos_emb::thread_v160_0_ce0() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state19.read())) {
        v160_0_ce0 = ap_const_logic_1;
    } else {
        v160_0_ce0 = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_v160_0_d0() {
    v160_0_d0 = v3_reg_653.read();
}

void apply_rotary_pos_emb::thread_v160_0_we0() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state19.read())) {
        v160_0_we0 = ap_const_logic_1;
    } else {
        v160_0_we0 = ap_const_logic_0;
    }
}

void apply_rotary_pos_emb::thread_v163_fu_292_p2() {
    v163_fu_292_p2 = (!v163_0_reg_182.read().is_01() || !ap_const_lv5_1.is_01())? sc_lv<5>(): (sc_biguint<5>(v163_0_reg_182.read()) + sc_biguint<5>(ap_const_lv5_1));
}

void apply_rotary_pos_emb::thread_v167_fu_356_p2() {
    v167_fu_356_p2 = (!v167_0_reg_204.read().is_01() || !ap_const_lv5_1.is_01())? sc_lv<5>(): (sc_biguint<5>(v167_0_reg_204.read()) + sc_biguint<5>(ap_const_lv5_1));
}

void apply_rotary_pos_emb::thread_zext_ln266_1_fu_336_p1() {
    zext_ln266_1_fu_336_p1 = esl_zext<12,7>(v165_0_0_reg_193.read());
}

void apply_rotary_pos_emb::thread_zext_ln266_fu_314_p1() {
    zext_ln266_fu_314_p1 = esl_zext<12,10>(tmp_44_fu_306_p3.read());
}

void apply_rotary_pos_emb::thread_zext_ln274_1_fu_400_p1() {
    zext_ln274_1_fu_400_p1 = esl_zext<12,7>(v169_0_0_reg_215.read());
}

void apply_rotary_pos_emb::thread_zext_ln274_fu_378_p1() {
    zext_ln274_fu_378_p1 = esl_zext<12,10>(tmp_46_fu_370_p3.read());
}

void apply_rotary_pos_emb::thread_zext_ln284_fu_491_p1() {
    zext_ln284_fu_491_p1 = esl_zext<64,10>(add_ln284_fu_485_p2.read());
}

void apply_rotary_pos_emb::thread_zext_ln291_1_fu_464_p1() {
    zext_ln291_1_fu_464_p1 = esl_zext<10,7>(d2_0_0_reg_237.read());
}

void apply_rotary_pos_emb::thread_zext_ln291_2_fu_468_p1() {
    zext_ln291_2_fu_468_p1 = esl_zext<12,7>(d2_0_0_reg_237.read());
}

void apply_rotary_pos_emb::thread_zext_ln291_fu_442_p1() {
    zext_ln291_fu_442_p1 = esl_zext<12,10>(tmp_48_fu_434_p3.read());
}

void apply_rotary_pos_emb::thread_ap_NS_fsm() {
    switch (ap_CS_fsm.read().to_uint64()) {
        case 1 : 
            if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state1.read()) && esl_seteq<1,1,1>(ap_start.read(), ap_const_logic_1))) {
                ap_NS_fsm = ap_ST_fsm_state2;
            } else {
                ap_NS_fsm = ap_ST_fsm_state1;
            }
            break;
        case 2 : 
            if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state2.read()) && esl_seteq<1,1,1>(icmp_ln263_fu_286_p2.read(), ap_const_lv1_1))) {
                ap_NS_fsm = ap_ST_fsm_state4;
            } else {
                ap_NS_fsm = ap_ST_fsm_state3;
            }
            break;
        case 4 : 
            if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state3.read()) && esl_seteq<1,1,1>(icmp_ln265_fu_324_p2.read(), ap_const_lv1_1))) {
                ap_NS_fsm = ap_ST_fsm_state2;
            } else {
                ap_NS_fsm = ap_ST_fsm_state3;
            }
            break;
        case 8 : 
            if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state4.read()) && esl_seteq<1,1,1>(ap_const_lv1_0, icmp_ln271_fu_350_p2.read()))) {
                ap_NS_fsm = ap_ST_fsm_state5;
            } else {
                ap_NS_fsm = ap_ST_fsm_state6;
            }
            break;
        case 16 : 
            if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state5.read()) && esl_seteq<1,1,1>(ap_const_lv1_1, icmp_ln273_fu_388_p2.read()))) {
                ap_NS_fsm = ap_ST_fsm_state4;
            } else {
                ap_NS_fsm = ap_ST_fsm_state5;
            }
            break;
        case 32 : 
            if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state6.read()) && esl_seteq<1,1,1>(ap_block_state6_on_subcall_done.read(), ap_const_boolean_0))) {
                ap_NS_fsm = ap_ST_fsm_state7;
            } else {
                ap_NS_fsm = ap_ST_fsm_state6;
            }
            break;
        case 64 : 
            if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state7.read()) && esl_seteq<1,1,1>(icmp_ln280_fu_414_p2.read(), ap_const_lv1_1))) {
                ap_NS_fsm = ap_ST_fsm_state1;
            } else {
                ap_NS_fsm = ap_ST_fsm_state8;
            }
            break;
        case 128 : 
            if ((esl_seteq<1,1,1>(ap_const_logic_1, ap_CS_fsm_state8.read()) && esl_seteq<1,1,1>(icmp_ln282_fu_452_p2.read(), ap_const_lv1_1))) {
                ap_NS_fsm = ap_ST_fsm_state7;
            } else {
                ap_NS_fsm = ap_ST_fsm_state9;
            }
            break;
        case 256 : 
            ap_NS_fsm = ap_ST_fsm_state10;
            break;
        case 512 : 
            ap_NS_fsm = ap_ST_fsm_state11;
            break;
        case 1024 : 
            ap_NS_fsm = ap_ST_fsm_state12;
            break;
        case 2048 : 
            ap_NS_fsm = ap_ST_fsm_state13;
            break;
        case 4096 : 
            ap_NS_fsm = ap_ST_fsm_state14;
            break;
        case 8192 : 
            ap_NS_fsm = ap_ST_fsm_state15;
            break;
        case 16384 : 
            ap_NS_fsm = ap_ST_fsm_state16;
            break;
        case 32768 : 
            ap_NS_fsm = ap_ST_fsm_state17;
            break;
        case 65536 : 
            ap_NS_fsm = ap_ST_fsm_state18;
            break;
        case 131072 : 
            ap_NS_fsm = ap_ST_fsm_state19;
            break;
        case 262144 : 
            ap_NS_fsm = ap_ST_fsm_state8;
            break;
        default : 
            ap_NS_fsm =  (sc_lv<19>) ("XXXXXXXXXXXXXXXXXXX");
            break;
    }
}

}

