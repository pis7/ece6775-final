-- Catapult Ultra Synthesis: Report                                              
-- ------------------------- ---------------------------------------------------
-- Version:                  2024.1_2/1117371 Production Release                 
-- Build Date:               Fri Jun 28 23:58:31 PDT 2024                        
                                                                                 
-- Generated by:             dr655@ecelinux-16.ece.cornell.edu                   
-- Generated date:           Thu Nov 28 23:21:49 EST 2024                        

Solution Settings: dut.v1
  Current state: schedule
  Project: Catapult_1

Design Input Files Specified
  $PROJECT_HOME/attention.cpp
    $PROJECT_HOME/attention.h
      $PROJECT_HOME/model.h
        $PROJECT_HOME/typedefs.h
          $MGC_HOME/shared/include/ac_int.h
          $MGC_HOME/shared/include/ac_fixed.h
      $MGC_HOME/shared/include/ac_channel.h
    $PROJECT_HOME/layer.h
      $MGC_HOME/shared/include/ac_math.h
        $MGC_HOME/shared/include/ac_math/ac_abs.h
          $MGC_HOME/shared/include/ac_float.h
          $MGC_HOME/shared/include/ac_complex.h
          $MGC_HOME/shared/include/ac_math/ac_sqrt_pwl.h
            $MGC_HOME/shared/include/ac_math/ac_shift.h
            $MGC_HOME/shared/include/ac_math/ac_normalize.h
        $MGC_HOME/shared/include/ac_math/ac_arccos_cordic.h
          $MGC_HOME/shared/include/ac_std_float.h
        $MGC_HOME/shared/include/ac_math/ac_arcsin_cordic.h
        $MGC_HOME/shared/include/ac_math/ac_atan_pwl.h
          $MGC_HOME/shared/include/ac_math/ac_reciprocal_pwl.h
        $MGC_HOME/shared/include/ac_math/ac_atan_pwl_ha.h
          $MGC_HOME/shared/include/ac_math/ac_reciprocal_pwl_ha.h
        $MGC_HOME/shared/include/ac_math/ac_atan2_cordic.h
        $MGC_HOME/shared/include/ac_math/ac_barrel_shift.h
        $MGC_HOME/shared/include/ac_math/ac_div.h
        $MGC_HOME/shared/include/ac_math/ac_hcordic.h
        $MGC_HOME/shared/include/ac_math/ac_inverse_sqrt_pwl.h
        $MGC_HOME/shared/include/ac_math/ac_log_pwl.h
        $MGC_HOME/shared/include/ac_math/ac_pow_pwl.h
        $MGC_HOME/shared/include/ac_math/ac_sigmoid_pwl.h
        $MGC_HOME/shared/include/ac_math/ac_sincos_cordic.h
        $MGC_HOME/shared/include/ac_math/ac_sincos_lut.h
        $MGC_HOME/shared/include/ac_math/ac_sqrt.h
        $MGC_HOME/shared/include/ac_math/ac_tan_pwl.h
        $MGC_HOME/shared/include/ac_math/ac_tanh_pwl.h
        $MGC_HOME/shared/include/ac_math/ac_softmax_pwl.h
        $MGC_HOME/shared/include/ac_float_add_tree.h
      $PROJECT_HOME/data_short/cos_tab.h
      $PROJECT_HOME/data_short/sin_tab.h
    $PROJECT_HOME/data_short/q_weights.h
    $PROJECT_HOME/data_short/k_weights.h
    $PROJECT_HOME/data_short/v_weights.h
    $PROJECT_HOME/data_short/o_weights.h
    $PROJECT_HOME/data_short/ln_weight_in.h
    $PROJECT_HOME/data_short/ln_weight.h
    $PROJECT_HOME/data_short/k_cache.h
    $PROJECT_HOME/data_short/v_cache.h
  $PROJECT_HOME/attention_test.cpp

Processes/Blocks in Design
  Process       Real Operation(s) count Latency Throughput Reset Length II Comments 
  ------------- ----------------------- ------- ---------- ------------ -- --------
  /dut/core                        1861    4251       4253            0  0          
  Design Total:                    1861    4251       4253            0  0          
  
Clock Information
  Clock Signal Edge   Period Sharing Alloc (%) Uncertainty Used by Processes/Blocks 
  ------------ ------ ------ ----------------- ----------- ------------------------
  clk          rising 10.000             20.00    0.000000 /dut/core                
  
I/O Data Ranges
  Port             Mode DeclType DeclWidth DeclRange ActType ActWidth ActRange 
  ---------------- ---- -------- --------- --------- ------- -------- --------
  clk              IN   Unsigned         1                                     
  en               IN   Unsigned         1                                     
  rst              IN   Unsigned         1                                     
  strm_in:rsc.dat  IN   Unsigned        32                                     
  strm_in:rsc.vld  IN   Unsigned         1                                     
  strm_out:rsc.rdy IN   Unsigned         1                                     
  strm_in:rsc.rdy  OUT  Unsigned         1                                     
  strm_out:rsc.dat OUT  Unsigned        32                                     
  strm_out:rsc.vld OUT  Unsigned         1                                     
  
Memory Resources
  Resource Name: /dut/core/attention<2,1,16,16,4,4>:k_cache_upd:rsc
    Memory Component: BLOCK_1R1W_RBW               Size:         48 x 40
    External:         false                        Packing Mode: absolute
    Memory Map:
    Variable                                       Indices Phys Memory Address      
    ---------------------------------------------- ------- ------------------------
    /dut/core/attention<2,1,16,16,4,4>:k_cache_upd    0:39 0000002f-00000000 (47-0) 
    
  Resource Name: /dut/core/attention<2,1,16,16,4,4>:v_cache_upd:rsc
    Memory Component: BLOCK_1R1W_RBW               Size:         48 x 40
    External:         false                        Packing Mode: absolute
    Memory Map:
    Variable                                       Indices Phys Memory Address      
    ---------------------------------------------- ------- ------------------------
    /dut/core/attention<2,1,16,16,4,4>:v_cache_upd    0:39 0000002f-00000000 (47-0) 
    
  Resource Name: /dut/core/attention<2,1,16,16,4,4>:k_proj_transposed:rsc
    Memory Component: BLOCK_1R1W_RBW               Size:         48 x 40
    External:         false                        Packing Mode: absolute
    Memory Map:
    Variable                                             Indices Phys Memory Address      
    ---------------------------------------------------- ------- ------------------------
    /dut/core/attention<2,1,16,16,4,4>:k_proj_transposed    0:39 0000002f-00000000 (47-0) 
    
  Resource Name: /dut/strm_in:rsc
    Memory Component: ccs_in_wait                  Size:         1 x 32
    External:         true                         Packing Mode: sidebyside
    Memory Map:
    Variable     Indices Phys Memory Address     
    ------------ ------- -----------------------
    /dut/strm_in    0:31 00000000-00000000 (0-0) 
    
  Resource Name: /dut/strm_out:rsc
    Memory Component: ccs_out_wait                 Size:         1 x 32
    External:         true                         Packing Mode: sidebyside
    Memory Map:
    Variable      Indices Phys Memory Address     
    ------------- ------- -----------------------
    /dut/strm_out    0:31 00000000-00000000 (0-0) 
    
  Resource Name: /dut/q_weights.rom:rsc
    Memory Component: mgc_rom                      Size:         64 x 8
    External:         false                        Packing Mode: absolute
    Memory Map:
    Variable           Indices Phys Memory Address      
    ------------------ ------- ------------------------
    /dut/q_weights.rom     0:7 0000003f-00000000 (63-0) 
    
  Resource Name: /dut/k_weights.rom:rsc
    Memory Component: mgc_rom                      Size:         64 x 8
    External:         false                        Packing Mode: absolute
    Memory Map:
    Variable           Indices Phys Memory Address      
    ------------------ ------- ------------------------
    /dut/k_weights.rom     0:7 0000003f-00000000 (63-0) 
    
  Resource Name: /dut/v_weights.rom:rsc
    Memory Component: mgc_rom                      Size:         64 x 8
    External:         false                        Packing Mode: absolute
    Memory Map:
    Variable           Indices Phys Memory Address      
    ------------------ ------- ------------------------
    /dut/v_weights.rom     0:7 0000003f-00000000 (63-0) 
    
  Resource Name: /dut/o_weights.rom:rsc
    Memory Component: mgc_rom                      Size:         64 x 8
    External:         false                        Packing Mode: absolute
    Memory Map:
    Variable           Indices Phys Memory Address      
    ------------------ ------- ------------------------
    /dut/o_weights.rom     0:7 0000003f-00000000 (63-0) 
    
  Resource Name: /dut/k_cache.rom:rsc
    Memory Component: mgc_rom                      Size:         32 x 19
    External:         false                        Packing Mode: absolute
    Memory Map:
    Variable         Indices Phys Memory Address      
    ---------------- ------- ------------------------
    /dut/k_cache.rom    0:18 0000001f-00000000 (31-0) 
    
  Resource Name: /dut/v_cache.rom:rsc
    Memory Component: mgc_rom                      Size:         32 x 20
    External:         false                        Packing Mode: absolute
    Memory Map:
    Variable         Indices Phys Memory Address      
    ---------------- ------- ------------------------
    /dut/v_cache.rom    0:19 0000001f-00000000 (31-0) 
    
  Resource Name: /dut/sin_tab.rom:rsc
    Memory Component: mgc_rom                      Size:         960 x 13
    External:         false                        Packing Mode: absolute
    Memory Map:
    Variable         Indices Phys Memory Address       
    ---------------- ------- -------------------------
    /dut/sin_tab.rom    0:12 000003bf-00000000 (959-0) 
    
  Resource Name: /dut/cos_tab.rom:rsc
    Memory Component: mgc_rom                      Size:         960 x 15
    External:         false                        Packing Mode: absolute
    Memory Map:
    Variable         Indices Phys Memory Address       
    ---------------- ------- -------------------------
    /dut/cos_tab.rom    0:14 000003bf-00000000 (959-0) 
    
C++ to Interface Mappings
  Resource/Fields C++ Type Interface Range Range Expression(x) x=step+offset Expression Limits 
  --------------- -------- --------------- ------------------- ------------- -----------------
  
Multi-Cycle (Combinational) Component Usage
  Instance                                                                Component Name                         Cycles 
  ----------------------------------------------------------------------- -------------------------------------- ------
  SOFTMAX_LOOP_5:SOFTMAX_LOOP_5:div#1:cmp                                 mgc_Xilinx-ZYNQ-1_beh.mgc_div(56,40,1)     18 
  LINEAR_FORWARD_NO_MUL_LOOP_2#2:LINEAR_FORWARD_NO_MUL_LOOP_2#2:div#1:cmp mgc_Xilinx-ZYNQ-1_beh.mgc_div(72,60,1)     30 
  operator_<40,24,true,AC_TRN,AC_WRAP>#1:div:cmp                          mgc_Xilinx-ZYNQ-1_beh.mgc_div(40,40,1)     13 
  rms_norm<16>:div:cmp                                                    mgc_Xilinx-ZYNQ-1_beh.mgc_div(72,61,1)     30 
  
Loops
  Process   Loop                               Iterations C-Steps Total Cycles   Duration  Unroll Init Comments 
  --------- ---------------------------------- ---------- ------- ------------- ---------- ------ ---- --------
  /dut/core core:rlp                             Infinite       0         4253   42.53 us                       
  /dut/core  main                                Infinite     101         4253   42.53 us                       
  /dut/core   for:for                                  16       3           48  480.00 ns                       
  /dut/core   compute_sqrt:for                         10      16          160    1.60 us                       
  /dut/core   RMS_NORM_LOOP_2                          16       5           80  800.00 ns                       
  /dut/core   QUANTIZE_ACTIVATION_LOOP_3               16       3           48  480.00 ns                       
  /dut/core   LINEAR_FORWARD_NO_MUL_LOOP_2             16      64         1408   14.08 us                       
  /dut/core    LINEAR_FORWARD_NO_MUL_LOOP_3             4       2           24  240.00 ns                       
  /dut/core     LINEAR_FORWARD_NO_MUL_LOOP_4            4       1            4   40.00 ns                       
  /dut/core   RESHAPE_2D_TO_3D_LOOP_2                   4       1           20  200.00 ns                       
  /dut/core    RESHAPE_2D_TO_3D_LOOP_3                  4       1            4   40.00 ns                       
  /dut/core   RESHAPE_2D_TO_3D_LOOP_2#2                 4       1           20  200.00 ns                       
  /dut/core    RESHAPE_2D_TO_3D_LOOP_3#2                4       1            4   40.00 ns                       
  /dut/core   APPLY_ROTARY_POS_EMB_LOOP_4               4       1           52  520.00 ns                       
  /dut/core    APPLY_ROTARY_POS_EMB_LOOP_6              4       3           12  120.00 ns                       
  /dut/core   CACHE_UPDATE_LOOP_1                       4       1          112    1.12 us                       
  /dut/core    CACHE_UPDATE_LOOP_2                      3       1           27  270.00 ns                       
  /dut/core     CACHE_UPDATE_LOOP_3                     4       2            8   80.00 ns                       
  /dut/core   TRANSPOSE_LAST_TWO_DIMS_LOOP_1            4       1          160    1.60 us                       
  /dut/core    TRANSPOSE_LAST_TWO_DIMS_LOOP_2           3       1           39  390.00 ns                       
  /dut/core     TRANSPOSE_LAST_TWO_DIMS_LOOP_3          4       3           12  120.00 ns                       
  /dut/core   GEMM_3D_FLOAT_LOOP_1                      4       1          220    2.20 us                       
  /dut/core    GEMM_3D_FLOAT_LOOP_3                     3       2           54  540.00 ns                       
  /dut/core     GEMM_3D_FLOAT_LOOP_4                    4       4           16  160.00 ns                       
  /dut/core   SF_LOOP_1                                 4       1           16  160.00 ns                       
  /dut/core    SF_LOOP_3                                3       1            3   30.00 ns                       
  /dut/core   CM_LOOP_1                                 4       1            4   40.00 ns                       
  /dut/core   SOFTMAX_LOOP_1                            4       2          292    2.92 us                       
  /dut/core    SOFTMAX_LOOP_3                           2       1            2   20.00 ns                       
  /dut/core    SOFTMAX_LOOP_4                           3       3            9   90.00 ns                       
  /dut/core    SOFTMAX_LOOP_5                           3      20           60  600.00 ns                       
  /dut/core   GEMM_3D_FLOAT_LOOP_1#1                    4       1          228    2.28 us                       
  /dut/core    GEMM_3D_FLOAT_LOOP_3#1                   4       2           56  560.00 ns                       
  /dut/core     GEMM_3D_FLOAT_LOOP_4#1                  3       4           12  120.00 ns                       
  /dut/core   ATTN_2D_LOOP_2                            4       1           20  200.00 ns                       
  /dut/core    ATTN_2D_LOOP_3                           4       1            4   40.00 ns                       
  /dut/core   RMS_NORM_LOOP_1#2                        16       3           48  480.00 ns                       
  /dut/core   compute_sqrt#1:for                       10      16          160    1.60 us                       
  /dut/core   RMS_NORM_LOOP_2#2                        16       5           80  800.00 ns                       
  /dut/core   QUANTIZE_ACTIVATION_LOOP_3#1             16       3           48  480.00 ns                       
  /dut/core   LINEAR_FORWARD_NO_MUL_LOOP_2#3           16      32          896    8.96 us                       
  /dut/core    LINEAR_FORWARD_NO_MUL_LOOP_3#3           4       2           24  240.00 ns                       
  /dut/core     LINEAR_FORWARD_NO_MUL_LOOP_4#3          4       1            4   40.00 ns                       
  /dut/core   for#1:for                                16       2           32  320.00 ns                       
  
Loop Execution Profile
  Process   Loop                               Total Cycles % of Overall Design Cycles Throughput Cycles Comments 
  --------- ---------------------------------- ------------ -------------------------- ----------------- --------
  /dut/core core:rlp                                     0                        0.00             4253           
  /dut/core  main                                      101                        2.37             4253           
  /dut/core   for:for                                   48                        1.13               48           
  /dut/core   compute_sqrt:for                         160                        3.76              160           
  /dut/core   RMS_NORM_LOOP_2                           80                        1.88               80           
  /dut/core   QUANTIZE_ACTIVATION_LOOP_3                48                        1.13               48           
  /dut/core   LINEAR_FORWARD_NO_MUL_LOOP_2            1024                       24.08             1408           
  /dut/core    LINEAR_FORWARD_NO_MUL_LOOP_3            128                        3.01              384           
  /dut/core     LINEAR_FORWARD_NO_MUL_LOOP_4           256                        6.02              256           
  /dut/core   RESHAPE_2D_TO_3D_LOOP_2                    4                        0.09               20           
  /dut/core    RESHAPE_2D_TO_3D_LOOP_3                  16                        0.38               16           
  /dut/core   RESHAPE_2D_TO_3D_LOOP_2#2                  4                        0.09               20           
  /dut/core    RESHAPE_2D_TO_3D_LOOP_3#2                16                        0.38               16           
  /dut/core   APPLY_ROTARY_POS_EMB_LOOP_4                4                        0.09               52           
  /dut/core    APPLY_ROTARY_POS_EMB_LOOP_6              48                        1.13               48           
  /dut/core   CACHE_UPDATE_LOOP_1                        4                        0.09              112           
  /dut/core    CACHE_UPDATE_LOOP_2                      12                        0.28              108           
  /dut/core     CACHE_UPDATE_LOOP_3                     96                        2.26               96           
  /dut/core   TRANSPOSE_LAST_TWO_DIMS_LOOP_1             4                        0.09              160           
  /dut/core    TRANSPOSE_LAST_TWO_DIMS_LOOP_2           12                        0.28              156           
  /dut/core     TRANSPOSE_LAST_TWO_DIMS_LOOP_3         144                        3.39              144           
  /dut/core   GEMM_3D_FLOAT_LOOP_1                       4                        0.09              220           
  /dut/core    GEMM_3D_FLOAT_LOOP_3                     24                        0.56              216           
  /dut/core     GEMM_3D_FLOAT_LOOP_4                   192                        4.51              192           
  /dut/core   SF_LOOP_1                                  4                        0.09               16           
  /dut/core    SF_LOOP_3                                12                        0.28               12           
  /dut/core   CM_LOOP_1                                  4                        0.09                4           
  /dut/core   SOFTMAX_LOOP_1                             8                        0.19              292           
  /dut/core    SOFTMAX_LOOP_3                            8                        0.19                8           
  /dut/core    SOFTMAX_LOOP_4                           36                        0.85               36           
  /dut/core    SOFTMAX_LOOP_5                          240                        5.64              240           
  /dut/core   GEMM_3D_FLOAT_LOOP_1#1                     4                        0.09              228           
  /dut/core    GEMM_3D_FLOAT_LOOP_3#1                   32                        0.75              224           
  /dut/core     GEMM_3D_FLOAT_LOOP_4#1                 192                        4.51              192           
  /dut/core   ATTN_2D_LOOP_2                             4                        0.09               20           
  /dut/core    ATTN_2D_LOOP_3                           16                        0.38               16           
  /dut/core   RMS_NORM_LOOP_1#2                         48                        1.13               48           
  /dut/core   compute_sqrt#1:for                       160                        3.76              160           
  /dut/core   RMS_NORM_LOOP_2#2                         80                        1.88               80           
  /dut/core   QUANTIZE_ACTIVATION_LOOP_3#1              48                        1.13               48           
  /dut/core   LINEAR_FORWARD_NO_MUL_LOOP_2#3           512                       12.04              896           
  /dut/core    LINEAR_FORWARD_NO_MUL_LOOP_3#3          128                        3.01              384           
  /dut/core     LINEAR_FORWARD_NO_MUL_LOOP_4#3         256                        6.02              256           
  /dut/core   for#1:for                                 32                        0.75               32           
  
End of Report
